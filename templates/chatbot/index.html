{% load static %}

<!DOCTYPE html>
<html lang="ko">

  <head>
    <meta charset="UTF-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>FamilyBridge</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous"/>
  </head>

  <body style="background-color: #eee">
    <section class="h-100">
      <div class="container my-4">
        <div class="row d-flex justify-content-center">
          <div class="col-md-8 col-lg-6 col-xl-4">
            <div class="card" id="chat1" style="border-radius: 15px">
              <div class="card-header d-flex justify-content-between align-items-center p-3 bg-dark text-white border-bottom-0" style="
                  border-top-left-radius: 15px;
                  border-top-right-radius: 15px;
                ">
                <i class="fas fa-angle-left"></i>
                <p class="mb-0 fw-bold">AI ChatBot</p>
                <i class="fas fa-times"></i>
              </div>
              <div class="card-body">
                <!-- Chat1 -->
                <div class="d-flex flex-row justify-content-start mb-4">
                  <img src="{% static 'chatbot/human icon.png' %}" alt="avatar 1" style="width: 45px; height: 100%"/>
                  <div class="p-3 ms-3" style="
                      border-radius: 15px;
                      background-color: rgba(70, 70, 70, 0.2);
                    ">
                    <p class="small mb-0">
                      안녕하세요. AI ChatBot입니다!<br/>
                      무엇을 도와드릴까요?
                    </p>
                  </div>
                </div>

                {% for chat in chat_history %}
                  <!-- Chat2 -->
                  <div class="d-flex flex-row justify-content-end mb-4">
                    <div class="p-3 me-3 border" style="border-radius: 15px; background-color: #fbfbfb">
                      <p class="small mb-0">{{ chat.0 }}</p>
                    </div>
                    <img src="{% static 'chatbot/human icon.png' %}" alt="avatar 1" style="width: 45px; height: 100%"/>
                  </div>
                  <!-- Chat1 -->
                  <div class="d-flex flex-row justify-content-start mb-4">
                    <img src="{% static 'chatbot/human icon.png' %}" alt="avatar 1" style="width: 45px; height: 100%"/>
                    <div class="p-3 ms-3" style="
                      border-radius: 15px;
                      background-color: rgba(70, 70, 70, 0.2);
                    ">
                      <p class="small mb-0">
                        {% for word in chat.1 %}
                          {%if word == '@'%}
                            <br/>
                            {%else%}
                            {{ word }}
                            {%endif%}
                          {% endfor %}
                        </p>
                      </div>
                    </div>
                  {% endfor %}
                </div>
                <div class="card-footer text-muted">
                  <form class="input-group mb-3" method="post">
                    {% csrf_token %}
                    <div class="form-floating">
                      <input class="form-control" placeholder="Leave a comment
                      here" id="floatingInput" name="floatingInput"/>
                      <label for="floatingInput" style="color: #aaa">AI에게 문의하기</label>
                    </div>
                    <button class="btn btn-outline-secondary" type="submit" id="button-addon2" onclick="send()">
                      전송
                    </button>
                  </form>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- JS -->
      <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4" crossorigin="anonymous"></script>
      <script>
        window.scrollTo(0, document.body.scrollHeight);
      </script>
    </body>

  </html>
